/* soma-events - v0.5.6 - 2013-07-09 - https://github.com/soundstep/soma-events - http://www.soundstep.com */(function(e){"use strict";e.events={},e.events.version="0.5.6",Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw Error("Error, you must bind a function.");var n=Array.prototype.slice.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(Array.prototype.slice.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r}),e.Event=function(t,n,r,i){var s=e.Event.createGenericEvent(t,r,i);return null!==n&&void 0!==n&&(s.params=n),s.isCloned=!1,s.clone=this.clone.bind(s),s.isIE9orIE10=this.isIE9orIE10,s.isDefaultPrevented=this.isDefaultPrevented,(this.isIE9orIE10()||!s.preventDefault||void 0===s.getDefaultPrevented&&void 0===s.defaultPrevented)&&(s.preventDefault=this.preventDefault.bind(s)),this.isIE9orIE10()&&(s.IE9or10PreventDefault=!1),s},e.Event.prototype.clone=function(){var t=e.Event.createGenericEvent(this.type,this.bubbles,this.cancelable);return t.params=this.params,t.isCloned=!0,t.clone=this.clone,t.isDefaultPrevented=this.isDefaultPrevented,t.isIE9orIE10=this.isIE9orIE10,this.isIE9orIE10()&&(t.IE9or10PreventDefault=this.IE9or10PreventDefault),t},e.Event.prototype.preventDefault=function(){return this.cancelable?(this.isIE9orIE10()?this.IE9or10PreventDefault=!0:this.defaultPrevented=!0,this):!1},e.Event.prototype.isDefaultPrevented=function(){return this.cancelable?this.isIE9orIE10()?this.IE9or10PreventDefault:void 0!==this.defaultPrevented?this.defaultPrevented:void 0!==this.getDefaultPrevented?this.getDefaultPrevented():!1:!1},e.Event.createGenericEvent=function(e,n,r){var i;return n=void 0!==n?n:!0,"object"==typeof document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(e,!!n,!!r)):"object"==typeof document&&document.createEventObject?(i=document.createEventObject(),i.type=e,i.bubbles=!!n,i.cancelable=!!r):i=new t(e,!!n,!!r),i},e.Event.prototype.isIE9orIE10=function(){return"object"!=typeof document?!1:void 0!==document.body.style.scrollbar3dLightColor&&void 0!==document.body.style.opacity||void 0!==document.body.style.msTouchAction},e.Event.prototype.toString=function(){return"[soma.Event]"};var t=function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.defaultPrevented=!1,this.currentTarget=null,this.target=null};e.EventDispatcher=function(){this.listeners=[]},e.EventDispatcher.prototype.addEventListener=function(e,t,n){if(this.listeners&&e&&t){isNaN(n)&&(n=0);for(var r=0;this.listeners.length>r;r++){var i=this.listeners[r];if(i.type===e&&i.listener===t)return}this.listeners.push({type:e,listener:t,priority:n,scope:this})}},e.EventDispatcher.prototype.removeEventListener=function(e,t){if(this.listeners&&e&&t)for(var n=this.listeners.length;n-->0;){var r=this.listeners[n];r.type===e&&r.listener===t&&this.listeners.splice(n,1)}},e.EventDispatcher.prototype.hasEventListener=function(e){if(!this.listeners||!e)return!1;for(var t=0,n=this.listeners.length;n>t;++t){var r=this.listeners[t];if(r.type===e)return!0}return!1},e.EventDispatcher.prototype.dispatchEvent=function(e){if(!this.listeners||!e)throw Error("Error in EventDispatcher (dispatchEvent), one of the parameters is null or undefined.");var t,n=[];for(t=0;this.listeners.length>t;t++){var r=this.listeners[t];r.type===e.type&&n.push(r)}for(n.sort(function(e,t){return t.priority-e.priority}),t=0;n.length>t;t++)n[t].listener.apply(e.srcElement?e.srcElement:e.currentTarget,[e]);return!e.isDefaultPrevented()},e.EventDispatcher.prototype.dispatch=function(t,n,r,i){if(!this.listeners||!t||""===t)throw Error("Error in EventDispatcher (dispatch), one of the parameters is null or undefined.");var s=new e.Event(t,n,r,i);return this.dispatchEvent(s),s},e.EventDispatcher.prototype.dispose=function(){this.listeners=null},e.EventDispatcher.prototype.toString=function(){return"[soma.EventDispatcher]"},"function"==typeof define&&define.amd!==void 0&&define("soma-events",e),"undefined"!=typeof module&&module.exports!==void 0&&(module.exports=e),"undefined"!=typeof exports&&(exports=e)})(this.soma=this.soma||{});